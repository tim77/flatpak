From b751fcc3937d8205cb2261c056aed7ffba218151 Mon Sep 17 00:00:00 2001
From: Artem Polishchuk <ego.cordatus@gmail.com>
Date: Sun, 12 Apr 2020 22:14:37 +0300
Subject: [PATCH 1/2] Update AppData manifest to conform guidelines
 https://github.com/flathub/flathub/wiki/AppData-Guidelines

Fix desktop file
---
 .../voxygen/net.veloren.veloren.appdata.xml   | 61 ----------------
 assets/voxygen/net.veloren.veloren.desktop    |  2 +-
 .../voxygen/net.veloren.veloren.metainfo.xml  | 73 +++++++++++++++++++
 3 files changed, 74 insertions(+), 62 deletions(-)
 delete mode 100644 assets/voxygen/net.veloren.veloren.appdata.xml
 create mode 100644 assets/voxygen/net.veloren.veloren.metainfo.xml

diff --git a/assets/voxygen/net.veloren.veloren.appdata.xml b/assets/voxygen/net.veloren.veloren.appdata.xml
deleted file mode 100644
index 1192abe8f..000000000
--- a/assets/voxygen/net.veloren.veloren.appdata.xml
+++ /dev/null
@@ -1,61 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<!-- Copyright 2019 Artem Polishchuk <ego.cordatus@gmail.com> -->
-<component type="desktop-application">
-    <id>net.veloren.veloren.desktop</id>
-    <metadata_license>CC0-1.0</metadata_license>
-    <project_license>GPL-3.0-or-later</project_license>
-    <content_rating type="oars-1.0">
-        <content_attribute id="social-chat">intense</content_attribute>
-        <content_attribute id="social-info">mild</content_attribute>
-        <content_attribute id="violence-cartoon">mild</content_attribute>
-        <content_attribute id="violence-fantasy">mild</content_attribute>
-    </content_rating>
-    <name>Veloren</name>
-    <summary>
-        Veloren is a multiplayer voxel RPG written in Rust. It is inspired
-        by games such as Cube World, Legend of Zelda: Breath of the Wild,
-        Dwarf Fortress and Minecraft.
-    </summary>
-    <description>
-        <p>
-            Welcome To Veloren!
-        </p><p>
-            Veloren is a multiplayer voxel RPG written in Rust. Veloren takes
-            inspiration from games such as Cube World, Minecraft and Dwarf
-            Fortress. The game is currently under heavy development, but is
-            playable.
-        </p><p>
-            Development
-        </p><p>
-            Currently the communication of contributors happens mainly on our
-            official Discord server (https://discord.gg/kjwJwjK). You can join
-            it to keep up with the development, talk to us or contribute
-            something yourself. Anyone who shows genuine effort to help is
-            welcome in our team. You don't have to know how to program to
-            contribute!
-        </p>
-    </description>
-    <screenshots>
-        <screenshot type="default">
-            <image>https://media.discordapp.net/attachments/634860358623821835/643034796548947968/screenshot_1573381825305.png</image>
-        </screenshot>
-        <screenshot>
-            <image>https://media.discordapp.net/attachments/597826574095613962/643102462781423616/screenshot_1573397958545.png</image>
-        </screenshot>
-        <screenshot>
-            <image>https://cdn.discordapp.com/attachments/634860358623821835/646518917577310219/screenshot_1574211401431.png</image>
-        </screenshot>
-    </screenshots>
-    <keywords>
-        <keyword>sandbox</keyword>
-        <keyword>world</keyword>
-        <keyword>multiplayer</keyword>
-    </keywords>
-    <url type="homepage">https://veloren.net</url>
-    <url type="bugtracker">https://gitlab.com/veloren/veloren/issues</url>
-    <url type="faq">https://gitlab.com/veloren/veloren#faq</url>
-    <url type="help">https://book.veloren.net/</url>
-    <provides>
-        <binary>veloren-voxygen</binary>
-    </provides>
-</component>
diff --git a/assets/voxygen/net.veloren.veloren.desktop b/assets/voxygen/net.veloren.veloren.desktop
index 5e4f2cd02..c6e434432 100644
--- a/assets/voxygen/net.veloren.veloren.desktop
+++ b/assets/voxygen/net.veloren.veloren.desktop
@@ -5,5 +5,5 @@ Comment=Veloren is a multiplayer voxel RPG written in Rust
 Exec=veloren-voxygen
 Categories=Game;Simulation;
 Keywords=veloren;sandbox;world;blocks;nodes;multiplayer;roleplaying;
-Icon=net.veloren.veloren.png
+Icon=net.veloren.veloren
 Terminal=false
diff --git a/assets/voxygen/net.veloren.veloren.metainfo.xml b/assets/voxygen/net.veloren.veloren.metainfo.xml
new file mode 100644
index 000000000..4615d83cf
--- /dev/null
+++ b/assets/voxygen/net.veloren.veloren.metainfo.xml
@@ -0,0 +1,73 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Copyright 2019 Artem Polishchuk <ego.cordatus@gmail.com> -->
+<component type="desktop-application">
+  <id>net.veloren.veloren.desktop</id>
+  <metadata_license>CC0-1.0</metadata_license>
+  <project_license>GPL-3.0-or-later</project_license>
+
+  <name>Veloren</name>
+  <provides>
+    <binary>veloren-voxygen</binary>
+  </provides>
+
+  <content_rating type="oars-1.0">
+    <content_attribute id="social-chat">intense</content_attribute>
+    <content_attribute id="social-info">mild</content_attribute>
+    <content_attribute id="violence-cartoon">mild</content_attribute>
+    <content_attribute id="violence-fantasy">mild</content_attribute>
+  </content_rating>
+
+  <summary>
+    Veloren is a multiplayer voxel RPG written in Rust. It is inspired by games
+    such as Cube World, Legend of Zelda: Breath of the Wild, Dwarf Fortress and
+    Minecraft.
+  </summary>
+
+  <description>
+    <p>
+      Welcome To Veloren!
+    </p><p>
+      Veloren is a multiplayer voxel RPG written in Rust. Veloren takes
+      inspiration from games such as Cube World, Minecraft and Dwarf Fortress.
+      The game is currently under heavy development, but is playable.
+    </p><p>
+      Development
+    </p><p>
+      Currently the communication of contributors happens mainly on our official
+      Discord server (https://discord.gg/kjwJwjK). You can join it to keep up
+      with the development, talk to us or contribute something yourself. Anyone
+      who shows genuine effort to help is welcome in our team. You don't have to
+      know how to program to contribute!
+    </p>
+  </description>
+
+  <releases>
+    <release date="2020-01-31" version="0.5.0"></release>
+  </releases>
+
+  <screenshots>
+    <screenshot type="default">
+      <image>https://veloren.net/screenshot1.png</image>
+    </screenshot>
+    <screenshot>
+      <image>https://veloren.net/screenshot2.png</image>
+    </screenshot>
+    <screenshot>
+      <image>https://veloren.net/screenshot3.png</image>
+    </screenshot>
+    <screenshot>
+      <image>https://veloren.net/screenshot4.png</image>
+    </screenshot>
+  </screenshots>
+
+  <keywords>
+    <keyword>multiplayer</keyword>
+    <keyword>sandbox</keyword>
+    <keyword>world</keyword>
+  </keywords>
+
+  <url type="bugtracker">https://gitlab.com/veloren/veloren/issues</url>
+  <url type="faq">https://gitlab.com/veloren/veloren#faq</url>
+  <url type="help">https://book.veloren.net/</url>
+  <url type="homepage">https://veloren.net</url>
+</component>
-- 
2.26.0


From dacc4b132b56785def9c225060d80e65143cb751 Mon Sep 17 00:00:00 2001
From: Artem Polishchuk <ego.cordatus@gmail.com>
Date: Tue, 14 Apr 2020 19:21:11 +0300
Subject: [PATCH 2/2] Automatically add build version and date into AppData

---
 assets/voxygen/net.veloren.veloren.metainfo.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/assets/voxygen/net.veloren.veloren.metainfo.xml b/assets/voxygen/net.veloren.veloren.metainfo.xml
index 4615d83cf..70b0f342b 100644
--- a/assets/voxygen/net.veloren.veloren.metainfo.xml
+++ b/assets/voxygen/net.veloren.veloren.metainfo.xml
@@ -42,7 +42,7 @@
   </description>
 
   <releases>
-    <release date="2020-01-31" version="0.5.0"></release>
+    <release date="@DATE@" version="@VERSION@"></release>
   </releases>
 
   <screenshots>
-- 
2.26.0

